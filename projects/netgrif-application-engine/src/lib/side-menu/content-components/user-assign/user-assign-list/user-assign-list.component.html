<ng-container *ngIf="users$ | async as users">

    <div *ngIf="(loading$ | async) === false && users.length === 0" class="margin-left-35"
         fxLayout="column" fxLayoutAlign="center center" fxFlex>
        <mat-icon color="accent" class="margin-bottom-default">person_add_disabled</mat-icon>
        <span class="font-size-20">{{ 'side-menu.user.noUser' | translate }}</span>
    </div>

    <mat-accordion multi="true" class="full-width" fxFlex="100">
        <cdk-virtual-scroll-viewport [itemSize]="PAGE_SIZE" (scrolledIndexChange)="loadNextPage()"
                                     class="full-height full-width">

            <!--TODO: Complete mat autocomplete-->
            <!--<mat-autocomplete autoActiveFirstOption>-->
            <nae-user-assign-item
                *cdkVirtualFor="let user of users;
                                let i = index;
                                let first = first;
                                let last = last;
                                trackBy: trackBy;
                                templateCacheSize: 0"
                [user]="user"
                (click)="select(user)"
                [first]="first" [last]="last">
            </nae-user-assign-item>
            <!--</mat-autocomplete>-->

            <div *ngIf="loading$ | async" fxLayout="column" fxLayoutAlign="center center"
                 class="margin-top-default">
                <mat-spinner color="primary" diameter="40"></mat-spinner>
            </div>

        </cdk-virtual-scroll-viewport>
    </mat-accordion>

</ng-container>
