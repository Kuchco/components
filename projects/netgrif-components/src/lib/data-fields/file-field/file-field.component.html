<nc-data-field-template *ngIf="!dataField.behavior.hidden"
                        [dataField]="dataField"
                        [dataFieldTemplate]="dataFieldTemplate"
                        [offset]="taskOffset">
</nc-data-field-template>

<ng-template #dataFieldTemplate let-showLargeLayout="showLargeLayout">
    <div>
        <mat-label *ngIf="!showLargeLayout.value">
            {{dataField.title}}
            <nc-required-label *ngIf="dataField.behavior.required" [isIn]="!dataField.disabled"></nc-required-label>
            <br>
        </mat-label>
        <div class="form-input button-icon-input full-width input-margin" fxLayout="row" fxLayoutAlign="start center">
            <button mat-icon-button color="accent" (click)="chooseFile()" matTooltip="Klikni pre nahranie súboru" *ngIf="!formControl.disabled"
                    [class.do-not-click]="state.uploading">
                <mat-icon>file_upload</mat-icon>
            </button>
            <span (click)="download()" fxFlex [matTooltip]="!dataField.value ? '' : 'Klikni pre stiahnutie súboru ' + name"
                  class="input-name-ellipsis" [ngClass]="{'input-placeholder': isEmpty()}">{{name}}</span>
            <button (click)="deleteFile()" matTooltip="Klikni pre vymazanie súboru" mat-icon-button *ngIf="dataField.value && (dataField.value.name || dataField.value.file) && !formControl.disabled">
                <mat-icon color="warn">close</mat-icon>
            </button>
        </div>
        <mat-progress-bar *ngIf="state.uploading || state.downloading" color="primary" [value]="state.progress"
                          [mode]="state.uploading ? 'determinate' : 'indeterminate'"
                          class="margin-bottom-default"></mat-progress-bar>
        <input type="file" #fileUploadInput name="fileUpload" [multiple]="false"
               accept="{{dataField.allowTypes}}" class="invisible-input"/>
        <input type="hidden" [formControl]="formControl" [multiple]="false" accept="{{dataField.allowTypes}}">
        <mat-hint class="file-hint-error" *ngIf="formControl.valid || !formControl.touched" >{{dataField.description}}</mat-hint>
        <mat-error class="file-hint-error" *ngIf="!formControl.valid && formControl.touched">{{'dataField.validations.required' | translate}}</mat-error>
    </div>
</ng-template>
