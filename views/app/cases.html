<div ng-cloak>

	<md-tabs md-dynamic-height md-autoselect="true" md-border-bottom md-selected="caseCtrl.activeTabIndex" class="background-tabs">

		<md-tab md-on-select="caseCtrl.caseTab.activate()" class="primary">

			<md-tab-label>
				{{::$i18n.page.cases.my}}
			</md-tab-label>

			<md-tab-body>
				<md-content layout="column" class="color-bg-transparent padding-2x">

					<div ng-include="'views/app/search_bars/case_search_bar.html'"></div>

					<md-divider class="border-width-2x color-border-transparent"></md-divider>

					<div flex layout="column">

						<div ng-include="'views/app/headers/case_header.html'"></div>

						<md-divider class="border-width-2x color-border-transparent"></md-divider>

						<div ng-include="'views/app/lists/case_list.html'"></div>

					</div>

					<div layout="row" layout-sm="column" layout-align="center center" class="padding-2x margin-2x" in-view="$inview&&caseCtrl.caseTab.load(true)" in-view-options="{ throttle: 0 }">
						<md-progress-circular md-mode="indeterminate" ng-disabled="!caseCtrl.caseTab.loading" class="progress-circular-stroke-accent-50" md-diameter="50"></md-progress-circular>
					</div>

				</md-content>
			</md-tab-body>
		</md-tab>

		<md-tab class="primary" ng-repeat="tab in caseCtrl.taskTabs" md-on-select="caseCtrl.tabChanged()">

			<md-tab-label>
				{{::tab.useCase.title}}
				<md-icon class="material-icons cursor-pointer font-size-22" ng-click="caseCtrl.closeTab(tab.useCase.stringId)">close</md-icon>
			</md-tab-label>

			<md-tab-body>
				<md-content layout="column" class="color-bg-transparent padding-2x">

					<div flex layout="row" layout-align="space-around center" class="card height-48px padding-horizontal-2x">

						<span ng-repeat="trans in tab.transactions | orderBy:'stringId'" ng-class="trans.active ? 'active' : ''" class="transaction">
							{{::trans.title}}
						</span>

					</div>

					<md-divider class="border-width-2x color-border-transparent"></md-divider>

					<div ng-include="'views/app/headers/task_header.html'"></div>

					<md-divider class="border-width-2x color-border-transparent"></md-divider>

					<md-expansion-panel-group md-component-id="'tasksGroup-'+tab.id" eval-attr-as-expr="mdComponentId" multiple></md-expansion-panel-group>

					<div layout="row" layout-align="center center" class="padding-2x margin-2x">
						<md-progress-circular md-mode="indeterminate" ng-disabled="!tab.loading" class="progress-circular-stroke-accent-50" md-diameter="50"></md-progress-circular>
					</div>

				</md-content>
			</md-tab-body>

		</md-tab>

	</md-tabs>
</div>