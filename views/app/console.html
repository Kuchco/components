<div ng-cloak class="layout-rh-100">

    <md-tabs md-dynamic-height md-autoselect="true" md-border-bottom class="background-tabs">

        <md-tab md-on-select="adminCtrl.loadOrganizations()">

            <md-tab-label>
                {{::$i18n.page.console.inviteUser}}
            </md-tab-label>

            <md-tab-body>
                <md-content layout-gt-xs="row" layout-xs="column" class="color-bg-transparent padding-2x">

                    <div flex-gt-xs="40" flex-xs layout="column">

                        <div ng-include="'views/app/toolbars/console_new_user_toolbar.html'"></div>

                        <md-divider class="border-width-2x color-border-transparent"></md-divider>

                        <div layout="row" layout-align="start center" class="card height-48px padding-horizontal-2x">
                            <span class="font-size-20">{{::$i18n.page.console.orgs}}</span>
                        </div>

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div layout="column" class="card padding-2x">

                            <md-list flex class="padding-0 layout-rw-100">

                                <md-list-item ng-if="adminCtrl.invitedUser.organizations.length === 0" class="list-item">
                                    <div flex layout="row" layout-align="space-between center">

                                        <span>{{::$i18n.page.console.thereIsNoOrgAssignedToThisUserYet}}</span>

                                    </div>
                                </md-list-item>

                                <md-list-item ng-repeat="org in adminCtrl.invitedUser.organizations" class="list-item" ng-click="null">
                                    <div flex layout="row" layout-align="space-between center">

                                        <span>{{org.name}}</span>

                                        <md-button class="md-icon-button" ng-click="org.remove()">
                                            <i class="material-icons color-fg-error">close</i>
                                        </md-button>

                                    </div>
                                </md-list-item>

                            </md-list>

                        </div>

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div layout="row" layout-align="start center" class="card height-48px padding-horizontal-2x">
                            <span class="font-size-20">{{::$i18n.page.console.roles}}</span>
                        </div>

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div layout="column" class="card padding-2x">

                            <div ng-if="adminCtrl.isObjEmpty(adminCtrl.invitedUser.processRoles)" flex class="layout-rw-100">

                                <md-list flex class="padding-0">
                                    <md-list-item class="list-item">
                                        <div flex layout="row" layout-align="space-between center">

                                            <span>{{::$i18n.page.console.thereIsNoRoleAssignedToThisUserYet}}</span>

                                        </div>
                                    </md-list-item>
                                </md-list>

                            </div>

                            <div flex class="layout-rw-100" ng-repeat="(netId, net) in adminCtrl.invitedUser.processRoles">

                                <span flex class="color-fg-primary-500 color-bg-transparent">
                                    {{net.title}}
                                </span>

                                <md-list flex class="padding-0">

                                    <md-list-item ng-repeat="role in net.roles" class="list-item" ng-click="null">
                                        <div flex layout="row" layout-align="space-between center">

                                            <span>{{role.name}}</span>

                                            <md-button class="md-icon-button" ng-click="role.remove(netId)">
                                                <i class="material-icons color-fg-error">close</i>
                                            </md-button>

                                        </div>
                                    </md-list-item>

                                </md-list>

                                <md-divider ng-if="!$last" class="margin-vertical-default"></md-divider>

                            </div>

                        </div>

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div layout="row" layout-align="start center" class="card padding-vertical-2x">

                            <md-progress-circular md-mode="indeterminate" class="progress-circular-stroke-accent-50 margin-left-default" md-diameter="30" ng-if="adminCtrl.inviteLoading"></md-progress-circular>

                            <div flex></div>

                            <md-button class="md-fab md-raised md-mini md-primary" ng-click="adminCtrl.invite()">
                                <md-icon class="material-icons">person_add</md-icon>
                                <md-tooltip md-direction="left">
                                    {{::$i18n.block.btn.invite}}
                                </md-tooltip>
                            </md-button>

                        </div>

                    </div> <!-- ./column -->

                    <md-divider class="border-width-default color-border-transparent"></md-divider>

                    <div flex-gt-xs="60" flex-xs layout-gt-sm="row" layout-sm="column" layout-xs="column">

                        <div flex layout="column">

                            <div ng-include="'views/app/toolbars/console_org_toolbar.html'"></div>

                            <md-divider class="border-width-2x color-border-transparent"></md-divider>

                            <md-list flex class="padding-0">

                                <md-list-item ng-repeat-start="org in adminCtrl.organizations" class="card list-item" ng-click="org.add()">
                                    <div flex layout="row" layout-align="space-between center">

                                        <span>{{org.name}}</span>

                                        <md-button class="md-icon-button" ng-click="org.add()">
                                            <md-icon class="material-icons color-fg-success">add</md-icon>
                                        </md-button>

                                    </div>
                                </md-list-item>

                                <md-divider ng-repeat-end class="border-width-default color-border-transparent"></md-divider>

                            </md-list>

                        </div>

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div flex layout="column">

                            <div ng-include="'views/app/toolbars/console_process_toolbar.html'"></div>

                            <md-divider class="border-width-2x color-border-transparent"></md-divider>

                            <md-list flex class="padding-0">

                                <md-list-item ng-repeat-start="role in adminCtrl.processRoles" class="card list-item" ng-click="role.add()">
                                    <div flex layout="row" layout-align="space-between center">

                                        <span>{{role.name}}</span>

                                        <md-button class="md-icon-button" ng-click="role.add()">
                                            <i class="material-icons color-fg-success">add</i>
                                        </md-button>

                                    </div>
                                </md-list-item>

                                <md-divider ng-repeat-end class="border-width-default color-border-transparent"></md-divider>

                            </md-list>

                        </div>
                    </div> <!-- ./column -->

                </md-content>
            </md-tab-body>

        </md-tab>

        <md-tab>

            <md-tab-label>
                {{::$i18n.page.console.processRoles}}
            </md-tab-label>

            <md-tab-body>
                <md-content layout="column" layout-align="start" class="padding-2x color-bg-transparent">

                    <div flex layout-gt-xs="row" layout-xs="column">

                        <div flex layout="column">

                            <div ng-include="'views/app/toolbars/console_user_toolbar.html'"></div>

                            <md-divider class="border-width-2x color-border-transparent"></md-divider>

                            <div layout="column">
                                <md-list flex class="padding-0">

                                    <md-list-item ng-repeat-start="user in users | orderBy:user.fullName"
                                                  ng-click="adminCtrl.selectUser(user)" class="card list-item"
                                                  ng-class="user.selected ? 'list-item-selected' : ''">
                                        <div flex layout="row" layout-align="start center">

                                            <i class="material-icons color-fg-primary-500 margin-right-2x">account_circle</i>

                                            <span>
                                                {{user.fullName}}
                                            </span>
                                            <md-tooltip>
                                                {{user.email}}
                                            </md-tooltip>
                                        </div>
                                    </md-list-item>

                                    <md-divider ng-repeat-end class="border-width-default color-border-transparent"></md-divider>

                                </md-list>
                            </div>

                        </div> <!-- ./column -->

                        <md-divider class="border-width-default color-border-transparent"></md-divider>

                        <div flex layout="column">

                            <div ng-include="'views/app/toolbars/console_role_toolbar.html'"></div>

                            <md-divider class="border-width-2x color-border-transparent"></md-divider>

                            <div layout="column">
                                <md-list flex class="padding-0">

                                    <md-list-item ng-repeat-start="role in roles | orderBy:role.name"
                                                  ng-click="adminCtrl.selectRole(role)" class="card list-item"
                                                  ng-class="role.selected ? 'list-item-selected' : ''">
                                        <div flex layout="row" layout-align="start center">

                                            <i class="material-icons color-fg-primary-500 margin-right-2x">perm_identity</i>

                                            <span>{{role.name}}</span>

                                        </div>
                                    </md-list-item>

                                    <md-divider ng-repeat-end class="border-width-default color-border-transparent"></md-divider>

                                </md-list>
                            </div>

                        </div> <!-- ./column -->

                    </div>

                </md-content>
            </md-tab-body>

        </md-tab>

    </md-tabs>

</div>