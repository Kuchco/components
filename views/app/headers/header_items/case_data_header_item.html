<div ng-if="caseTab.headers.mode === caseTab.constants.HEADER_MODE_SORT" ng-click="caseTab.changeSorting(caseTab.headers.selected[headerId])" class="case-data-header-item">
    <div layout="row" layout-align="start center">
        <div flex class="case-data-header-item-text">
            <span>{{caseTab.headers.selected[headerId] ? caseTab.headers.selected[headerId].title : $i18n.block.case.header.optional}}</span>
        </div>
        <md-icon class="material-icons" ng-if="!caseTab.loading">
            {{caseTab.headers.selected[headerId].sort.dir === caseTab.constants.HEADERS_SORT_DIR_ASC ? "arrow_drop_up" : "arrow_drop_down"}}
        </md-icon>
        <md-progress-circular md-mode="indeterminate" ng-if="caseTab.headers.sortItem === caseTab.headers.selected[headerId]" ng-disabled="!caseTab.loading" class="progress-circular-stroke-primary-500" md-diameter="20" style="display: unset; margin-left: 5px;"></md-progress-circular>
    </div>
</div>

<md-input-container ng-if="caseTab.headers.mode === caseTab.constants.HEADER_MODE_EDIT" class="md-block margin-0">
    <md-select ng-model="caseTab.headers.selected[headerId]" ng-change="caseTab.onHeaderChange(headerId)" class="margin-top-2px" aria-label="Select field">

        <md-optgroup label="{{::$i18n.block.case.header.metaData}}">
            <md-option ng-repeat="field in caseTab.headers.metaData" ng-value="field">
                {{field.title}}
            </md-option>
        </md-optgroup>

        <md-optgroup ng-repeat="process in caseTab.headers.processData" label="{{::process.title}}">
            <md-option ng-repeat="field in process.immediateData track by $index" ng-value="field">
                {{field.title}}
            </md-option>
        </md-optgroup>

    </md-select>
</md-input-container>

<div ng-if="caseTab.headers.mode === caseTab.constants.HEADER_MODE_SEARCH"
     ng-include="'views/app/search_bars/search_inputs/search_typed_input.html'"
     ng-init="switchExpression = 'caseTab.caseSearch.headerSearchFieldsMetadata[$index].inputType'; inputGui = search.constants.HEADER_GUI; inputTitles = search.inputFieldTitles.header">
</div>