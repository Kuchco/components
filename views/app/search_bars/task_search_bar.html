<div layout="row" class="card padding-2x">

    <div flex layout="column">

        <div layout="row" layout-align="start center">

            <i class="material-icons color-fg-primary-500 margin-right-14px">search</i>

            <div flex layout="row">

                <div layout-gt-xs="row" layout-xs="column">

                    <md-autocomplete class="md-block"
                                     md-search-text="tasksCtrl.tabs[$index].filter.selectedProcess.search"
                                     md-selected-item="tasksCtrl.tabs[$index].filter.selectedProcess.item"
                                     md-selected-item-change="tasksCtrl.processSearchChange(item)"
                                     md-items="item in tasksCtrl.queryProcesses()"
                                     md-item-text="item.title"
                                     md-min-length="0"
                                     md-no-cache="true"
                                     md-floating-label="{{::$i18n.page.tasks.filter.process}}">

                        <md-item-template>
                                            <span md-highlight-text="tasksCtrl.tabs[$index].filter.selectedProcess.search" md-highlight-flags="i">
                                                {{item.title}}
                                            </span>
                        </md-item-template>

                        <md-not-found>
                            {{::$i18n.page.tasks.filter.process + " " + tasksCtrl.tabs[$index].filter.selectedProcess.search + " " + $i18n.page.tasks.filter.processNotFound}}
                        </md-not-found>

                    </md-autocomplete>

                    <md-autocomplete class="md-block"
                                     md-search-text="tasksCtrl.tabs[$index].filter.selectedTransition.search"
                                     md-selected-item="tasksCtrl.tabs[$index].filter.selectedTransition.item"
                                     md-selected-item-change="tasksCtrl.transitionSearchChange(item)"
                                     md-items="item in tasksCtrl.queryTransitions()"
                                     md-item-text="item.title"
                                     md-min-length="0"
                                     md-no-cache="true"
                                     md-floating-label="{{::$i18n.page.tasks.filter.task}}">

                        <md-item-template>
                                            <span md-highlight-text="TODO.tasksCtrl.filter.selectedTransition.search" md-highlight-flags="i">
                                                {{item.title}}
                                            </span>
                        </md-item-template>

                        <md-not-found>
                            {{::$i18n.page.tasks.filter.task + " " + tasksCtrl.tabs[$index].filter.selectedTransition.search + " " + $i18n.page.tasks.filter.taskNotFound}}
                        </md-not-found>

                    </md-autocomplete>
                </div>

                <md-menu layout="column" layout-align="center center">
                    <md-button class="md-icon-button" ng-click="$mdMenu.open($event)" md-menu-origin>
                        <md-icon class="material-icons">more_vert</md-icon>
                    </md-button>
                    <md-menu-content>
                        <md-menu-item>
                            <md-button ng-click="taskCtrl.showDialog('save_filter')">
                                <md-icon class="material-icons">save</md-icon>
                                <span>{{::$i18n.block.btn.save}}</span>
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="tasksCtrl.clearFilter()">
                                <md-icon class="material-icons">clear_all</md-icon>
                                <span>{{::$i18n.block.btn.reset}}</span>
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>

            </div>

        </div>

        <div layout="row" layout-align="start center">

            <i class="material-icons color-fg-primary-500 margin-right-14px">filter_list</i>

            <md-chips ng-model="tasksCtrl.tabs[$index].filter.chips" readonly="true" md-removable="true"
                      md-on-remove="tasksCtrl.removeChip($chip)"
                      id="chips-container">
                <md-chip-template>
                    {{$chip.title}}
                </md-chip-template>

                <!-- TODO 8.1.2018 Temporary for view tests -->
                <md-chip>Test</md-chip>
                <md-chip>Test</md-chip>
                <md-chip>Test</md-chip>
                <!-- ./Temporary -->

            </md-chips>

        </div>

    </div>

    <div layout="column" layout-align="center center">

        <md-button class="md-fab md-raised md-mini md-primary" ng-click="tasksCtrl.searchTasks()">
            <md-icon class="material-icons">search</md-icon>
            <md-tooltip md-direction="left">
                {{::$i18n.block.btn.search}}
            </md-tooltip>
        </md-button>

    </div>

</div> <!-- ./card -->