<div layout="column" class="card padding-2x" ng-if="search.guiComplexity === search.constants.COMPLEX_GUI || search.guiComplexity === search.constants.COMBINED_GUI">
    <div layout="row" layout-align="space-between center">
        <div layout="row" layout-align="start center">

            <md-input-container class="md-block margin-0 min-width-170px" flex>
                <label class="placeholder">{{::$i18n.block.search.searchType}}</label>
                <md-select ng-model="search.searchCategory" ng-change="search.clearDatafieldInput()">
                    <md-option ng-repeat="(key, type) in search.enabledCategories" ng-value="type">
                        {{type.name}}
                    </md-option>
                </md-select>
            </md-input-container>

            <md-autocomplete md-search-text="search.searchDatafield.text"
                             md-selected-item="search.searchDatafield.object"
                             md-selected-item-change="search.searchCategory.datafieldFilter(); search.clearOperatorInput()"
                             md-items="item in search.searchCategory.datafieldFilter()"
                             md-item-text="item.text"
                             md-min-length="0"
                             md-no-cache="true"
                             md-select-on-match="true"
                             md-match-case-insensitive="true"
                             md-dropdown-items="5"
                             md-floating-label="{{search.$i18n.block.search.datafield}}"
                             ng-if="search.searchCategory && search.searchCategory.id === search.constants.CATEGORY.CASE.DATASET"
                             class="autocomplete-aligned-to-input min-width-250px">
                <md-item-template>
                    <md-icon class="material-icons">{{item.getTypeIcon()}}</md-icon>
                    <span md-highlight-text="search.searchDatafield.text" md-highlight-flags="i">
                        {{item.text}}
                    </span>
                </md-item-template>
                <md-not-found>
                    {{::$i18n.block.search.autocompleteInputNotFound}}
                </md-not-found>
            </md-autocomplete>

            <md-input-container class="md-block margin-0 min-width-120px" flex ng-if="search.searchCategory && (search.searchCategory.id !== search.constants.CATEGORY.CASE.DATASET || search.searchDatafield.object)">
                <label class="placeholder">{{::$i18n.block.search.condition}}</label>
                <md-select ng-model="search.searchOperator" ng-change="search.clearArgumentsInput(); search.setInputTitles()">
                    <md-option ng-repeat="operator in search.searchCategory.allowedOperators(undefined, search.searchDatafield.object.toSerializedForm())" ng-value="operator">
                        {{operator.display}}
                    </md-option>
                </md-select>
            </md-input-container>

             <div ng-if="search.searchOperator && search.searchOperator.numberOfOperands > 0"
                  ng-init="switchExpression = 'search.searchCategory.argsInputType && search.searchCategory.argsInputType()'; inputGui = search.constants.COMPLEX_GUI; inputTitles = search.inputFieldTitles.complex"
                  ng-repeat="argIndex in [].constructor(search.searchOperator.numberOfOperands) track by $index"
                  ng-include="'views/app/search_bars/search_inputs/search_typed_input.html'">
             </div>

            <div ng-include="'views/app/search_bars/search_bar_components/buttons/buttonAddChipPart.html'"></div>

            <div ng-include="'views/app/search_bars/search_bar_components/buttons/buttonClearSearch.html'"></div>

            <div ng-include="'views/app/search_bars/search_bar_components/buttons/buttonSaveFilter.html'"></div>

        </div>
        <div flex-gt-xs="5" layout="row" layout-align="end center">
            <div ng-include="'views/app/search_bars/search_bar_components/buttons/buttonNewCase.html'"></div>
        </div>
    </div>
    <div ng-if="search.chipParts.committed.length > 0 || search.chips.committed.length > 0" layout="row">
        <div flex-gt-lg="5" flex-lg="10" layout="row" layout-align="end center">
            <md-button ng-disabled="search.chipParts.committed.length < 2"
                       ng-click="search.commitChip(); search.filterPossibleNets(); tab.search()"
                       class="md-fab md-mini md-accent margin-left-0 margin-top-0 margin-bottom-0 margin-right-default">
                <span class="mdi mdi-24px mdi-vector-union"></span>
                <md-tooltip md-direction="top">
                    {{::$i18n.block.search.addChip}}
                </md-tooltip>
            </md-button>

            <span class="mdi mdi-24px mdi-vector-combine margin-right-default"></span>
        </div>
        <div ng-include="'views/app/search_bars/search_bar_components/chips/chipParts.html'" flex></div>
    </div>
    <div ng-if="search.chips.committed.length > 0" layout="row">
        <div flex-gt-lg="5" flex-lg="10" layout="row" layout-align="end center">
            <span class="mdi mdi-24px mdi-vector-intersection margin-right-default"></span>
        </div>
        <div ng-include="'views/app/search_bars/search_bar_components/chips/chips.html'" flex></div>
    </div>
<!--    TODO remove this after development-->
<!--    <div flex-gt-xs="5" layout="row" layout-align="end center">-->
<!--        <md-button ng-disabled="!(search.allArgumentsFilled() || search.chipParts.committed.length > 0 || search.chips.committed.length > 0 || search.searchArguments[search.constants.HEADER_GUI].length > 0 || search.searchObjects[search.constants.HEADER_GUI].length > 0)" class="md-fab md-mini md-accent"-->
<!--                   ng-click="search.commitChip(); tab.search(); mainCtrl.reloadCounters(); search.filterPossibleNets()" layout-align=" end">-->
<!--            <md-icon class="material-icons">search</md-icon>-->
<!--            <md-tooltip md-direction="top">-->
<!--                {{::$i18n.block.search.search}}-->
<!--            </md-tooltip>-->
<!--        </md-button>-->
<!--    </div>-->
</div><!-- ./card -->